{% extends 'admin/admin_layout.html' %}
{% block page %}
  <div class="info">
    <h2>Global Settings</h2>
    <table class="table table-bordered">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Setting</th>
          <th scope="col">Edit</th>
        </tr>
      </thead>
      <tbody>
        <tr class="{{ 'disabled' if setting_closed else '' }}">
          <td>Voting status</td>
          <td class="compact">
            <form action="/admin/settings/update-status" method="post">
              <input type="submit"
                     name="value"
                     value="{{ 'Open' if setting_closed else 'Close' }}"
                     class="btn {{ 'btn-success' if setting_closed else 'btn-danger' }}"/>
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"/>
            </form>
          </td>
        </tr>
        <tr>
          <td>Time per project</td>
          <td class="compact">
            <form action="/admin/settings/update" method="post">
              <input type="text" name="value" value="{{ time_per_project }}"/>
              <input type="submit" value="Update" class="btn btn-success"/>
              <input type="hidden" name="identifier" value="TIME_PER_PROJECT"/>
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"/>
            </form>
          </td>
        </tr>
        <tr>
          <td>Max time per project / general alert starts</td>
          <td class="compact">
            <form action="/admin/settings/update" method="post">
              <input type="text" name="value" value="{{ max_time_per_project }}"/>
              <input type="submit" value="Update" class="btn btn-success"/>
              <input type="hidden" name="identifier" value="MAX_TIME_PER_PROJECT"/>
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"/>
            </form>
          </td>
        </tr>
        <tr>
          <td>
            Jury end datetime - Remmeber to substract -2 hours for EEST
            timezone
          </td>
          <td class="compact">
            <form action="/admin/settings/update" method="post">
              {% if jury_end %}
                <input type="text" name="value" value="{{ jury_end }}"/>
              {% else %}
                <input type="text" name="value" value="2020-11-18T22:00:00"/>
              {% endif %}
              <input type="submit" value="Update" class="btn btn-success"/>
              <input type="hidden" name="identifier" value="JURY_END_DATETIME"/>
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"/>
            </form>
          </td>
        </tr>
        <tr>
          <td>Import teams</td>
          <td class="compact">
            <form action="/admin/settings/import-teams" method="post">
              <input type="submit" value="Import" class="btn btn-success"/>
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"/>
            </form>
          </td>
        </tr>
        <tr>
          <td>Delete All Skips</td>
          <td class="compact">
            <form action="/admin/settings/delete-skips" method="post">
              <input type="submit" value="Delete Skips" class="btn btn-danger"/>
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"/>
            </form>
          </td>
        </tr>
        <tr>
          <td>Wipe votes, skips & ignores</td>
          <td class="compact">
            <form action="/admin/settings/wipe-votes" method="post">
              <input type="submit"
                     value="Wipe votes, skips & ignores"
                     class="btn btn-danger"/>
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"/>
            </form>
          </td>
        </tr>
        <tr>
          <td>Wipe Data</td>
          <td class="compact">
            <form action="/admin/settings/wipe-data" method="post">
              <input type="submit" value="Wipe All Data" class="btn btn-danger"/>
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"/>
            </form>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
{% endblock %}
